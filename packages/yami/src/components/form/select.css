/*
name: select
desc: 下拉选择组件，用于从多个选项中选择一个。
usage: 常用于表单、过滤器、设置项。
syntax:
 <select class="select">
  <option>默认选择</option>
  <option>选项 A</option>
  <option>选项 B</option>
</select>
*/
@import "../../utilities/style.css";

@utility select {
  @apply w-full px-4 input-h-md pr-10;
  @apply text-sm text-foreground;
  @apply bg-background;
  @apply border border-input rounded-md;
  @apply transition-colors duration-200;
  @apply cursor-pointer;
  @apply appearance-none;
  @apply focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent;
  @apply disabled:opacity-40 disabled:cursor-not-allowed;

  /* 自定义下拉箭头 */
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23666'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 0.5rem center;
  background-size: 1.25rem;
}

/* 夜间模式箭头 */
@media (prefers-color-scheme: dark) {
  .select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23999'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
  }
}

/* 颜色变体 */
@utility select-primary {
  @apply border-primary focus:ring-primary;
}

@utility select-secondary {
  @apply border-secondary focus:ring-secondary;
}

@utility select-accent {
  @apply border-accent focus:ring-accent;
}
@utility select-destructive {
  @apply border-destructive focus:ring-destructive;
}

/* 尺寸变体 */
@utility select-xs {
  @apply px-2 input-h-xs pr-7 text-xs;
  background-size: 1rem;
  background-position: right 0.25rem center;
}

@utility select-sm {
  @apply px-3 input-h-sm pr-8 text-sm;
  background-size: 1.1rem;
  background-position: right 0.375rem center;
}

@utility select-md {
  @apply px-4 input-h-md pr-9 text-sm;
  background-size: 1.15rem;
  background-position: right 0.5rem center;
}

@utility select-lg {
  @apply px-4 input-h-lg pr-10 text-base;
  background-size: 1.15rem;
  background-position: right 0.75rem center;
}

@utility select-xl {
  @apply px-4 input-h-xl pr-11 text-lg;
  background-size: 1.15rem;
  background-position: right 1rem center;
}

@utility select-wide {
  @apply w-full max-w-64;
}

/* Ghost 样式 */
@utility select-ghost {
  @apply border-transparent bg-transparent;
  @apply hover:bg-muted;
}

/* Bordered 样式 */
@utility select-bordered {
  @apply border-2;
}

/* 无边框样式 */
@utility select-borderless {
  @apply border-transparent;
  @apply focus:ring-0 focus:border-transparent;
}

/* 带图标的 select 容器 */
@utility select-wrapper {
  @apply relative inline-block w-full;

  & > .icon-left {
    @apply absolute left-3 top-1/2 -translate-y-1/2;
    @apply text-muted-foreground pointer-events-none;
  }

  & > select {
    @apply pl-10;
  }
}

/* Select 组（多个 select 组合） */
@utility select-group {
  @apply flex gap-2;

  & > select {
    @apply flex-1;
  }
}

/* Select 带标签 */
@utility select-labeled {
  @apply flex flex-col gap-1.5;

  & > label {
    @apply text-sm font-medium text-foreground;
  }

  & > .helper-text {
    @apply text-xs text-muted-foreground;
  }

  & > .error-text {
    @apply text-xs text-error dark:text-error;
  }
}

/* Multiple select */
@utility select-multiple {
  @apply py-2 h-48;
  background-image: none;

  & option {
    @apply py-1.5 px-2;
  }

  /* primary */
  & option:checked,
  & option:focus,
  & option:active,
  & option:hover {
    @apply bg-primary text-primary-foreground;
  }

  /* ---------------------- 变体选中背景 ---------------------- */

  /* primary */
  &:has(.select-primary) option:checked,
  &:has(.select-primary) option:focus,
  &:has(.select-primary) option:active,
  &:has(.select-primary) option:hover {
    @apply bg-primary;
  }

  /* secondary */
  &:has(.select-secondary) option:checked,
  &:has(.select-secondary) option:focus,
  &:has(.select-secondary) option:active,
  &:has(.select-secondary) option:hover {
    @apply bg-secondary;
  }

  /* accent */
  &:has(.select-accent) option:checked,
  &:has(.select-accent) option:focus,
  &:has(.select-accent) option:active,
  &:has(.select-accent) option:hover {
    @apply bg-accent;
  }

  /* destructive */
  &:has(.select-destructive) option:checked,
  &:has(.select-destructive) option:focus,
  &:has(.select-destructive) option:active,
  &:has(.select-destructive) option:hover {
    @apply bg-destructive;
  }
}

/* 自定义 optgroup 样式 */
@utility select-optgroup {
  @apply font-semibold text-foreground;
}

@utility select-option {
  @apply py-1 text-foreground bg-background;

  &:disabled {
    @apply opacity-40 cursor-not-allowed;
  }
}
