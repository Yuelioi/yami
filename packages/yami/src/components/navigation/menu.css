/* === Menu 组件 === */
@utility menu {
  @apply flex flex-col p-2 gap-1;
  @apply w-full;

  /* 菜单项 */
  & li {
    @apply list-none;
  }

  /* 菜单链接 */
  & li > a,
  & li > button,
  & li > span:not(.menu-title) {
    @apply flex items-center gap-2 px-3 py-2 rounded-[var(--radius)];
    @apply text-sm font-medium text-foreground;
    @apply hover:bg-muted transition-colors cursor-pointer;
  }

  /* 嵌套菜单 */
  & ul {
    @apply flex flex-col gap-1 pl-4 mt-1;
  }

  /* details 的 summary */
  & details > summary {
    @apply flex items-center gap-2 px-3 py-2 rounded-[var(--radius)];
    @apply text-sm font-medium text-foreground;
    @apply hover:bg-muted transition-colors cursor-pointer;
    @apply list-none;
  }

  /* 隐藏默认的三角标记 */
  & details > summary::-webkit-details-marker {
    @apply hidden;
  }

  /* 添加自定义展开图标 */
  & details > summary::after {
    content: "›";
    @apply ml-auto text-muted-foreground transition-transform;
  }

  & details[open] > summary::after {
    @apply rotate-90;
  }
}

/* === Menu 标题 === */
@utility menu-title {
  @apply px-3 py-2 text-xs font-semibold text-muted-foreground uppercase tracking-wider;
}

/* === Menu 状态 === */
@utility menu-active {
  @apply bg-primary text-primary-foreground;
  @apply hover:bg-primary/90;
}

@utility menu-focus {
  @apply bg-accent text-accent-foreground;
}

@utility menu-disabled {
  @apply opacity-50 pointer-events-none cursor-not-allowed;
}

/* === Menu 尺寸 === */
@utility menu-xs {
  @apply text-xs;

  & li > a,
  & li > button,
  & li > span:not(.menu-title),
  & details > summary {
    @apply px-2 py-1 text-xs gap-1.5;
  }

  & .menu-title {
    @apply px-2 py-1 text-[10px];
  }

  & svg {
    @apply size-3;
  }
}

@utility menu-sm {
  @apply text-sm;

  & li > a,
  & li > button,
  & li > span:not(.menu-title),
  & details > summary {
    @apply px-2.5 py-1.5 text-sm;
  }

  & .menu-title {
    @apply px-2.5 py-1.5 text-xs;
  }

  & svg {
    @apply size-4;
  }
}

@utility menu-md {
  @apply flex flex-col p-2 gap-1;
}

@utility menu-lg {
  @apply text-base;

  & li > a,
  & li > button,
  & li > span:not(.menu-title),
  & details > summary {
    @apply px-4 py-3 text-base gap-3;
  }

  & .menu-title {
    @apply px-4 py-2.5 text-sm;
  }

  & svg {
    @apply size-5;
  }
}

@utility menu-xl {
  @apply text-lg;

  & li > a,
  & li > button,
  & li > span:not(.menu-title),
  & details > summary {
    @apply px-5 py-4 text-lg gap-4;
  }

  & .menu-title {
    @apply px-5 py-3 text-base;
  }

  & svg {
    @apply size-6;
  }
}

/* === Menu 水平布局 === */
@utility menu-horizontal {
  @apply flex-row items-center p-0 gap-1;

  & ul {
    @apply flex-row pl-0 mt-0;
  }

  /* 水平菜单的下拉 */
  & details {
    @apply relative;
  }

  & details > ul {
    @apply absolute top-full left-0 mt-1 flex-col;
    @apply bg-popover border border-border rounded-[var(--radius)] shadow-lg;
    @apply min-w-[200px] p-2;
  }

  & details:not([open]) > ul {
    @apply hidden;
  }
}

/* === Menu 垂直布局 === */
@utility menu-vertical {
  @apply flex-col;
}

/* === Menu 样式变体 === */

/* 紧凑型 */
@utility menu-compact {
  @apply p-1 gap-0.5;

  & li > a,
  & li > button,
  & li > span:not(.menu-title),
  & details > summary {
    @apply px-2 py-1;
  }
}

/* 带边框 */
@utility menu-bordered {
  @apply border border-border rounded-[var(--radius)];
}

/* 带背景 */
@utility menu-contained {
  @apply bg-card border border-border rounded-[var(--radius)];
}

/* 带分隔线 */
@utility menu-divided {
  & li:not(:last-child) {
    @apply border-b border-border;
  }

  & details:not(:last-child) {
    @apply border-b border-border;
  }
}

/* === Menu 图标支持 === */
@utility menu-icon {
  & svg,
  & [class*="icon"] {
    @apply size-4 shrink-0;
  }
}

/* === Menu 分隔符 === */
@utility menu-divider {
  @apply h-px bg-border my-2 mx-3;
}
