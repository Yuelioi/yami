@utility tabs {
  @apply relative flex  flex-wrap font-sans;

  .tab-header {
    @apply flex;
  }

  & input[type="radio"] {
    @apply sr-only;
  }

  /* 选中时对应的 tab-content 显示(并列结构) 
.tabs
 ├── (input[type=radio] 
 ├── label.tab-title ) × n
 └── .tab-content × n
   * */
  & input:nth-of-type(1):checked ~ .tab-content:nth-of-type(1),
  & input:nth-of-type(2):checked ~ .tab-content:nth-of-type(2),
  & input:nth-of-type(3):checked ~ .tab-content:nth-of-type(3),
  & input:nth-of-type(4):checked ~ .tab-content:nth-of-type(4),
  & input:nth-of-type(5):checked ~ .tab-content:nth-of-type(5),
  &
    input:nth-of-type(6):checked
    ~ .tab-content:nth-of-type(6)
    &
    input:nth-of-type(7):checked
    ~ .tab-content:nth-of-type(7)
    &
    input:nth-of-type(8):checked
    ~ .tab-content:nth-of-type(8)
    &
    input:nth-of-type(9):checked
    ~ .tab-content:nth-of-type(9) {
    @apply block;
  }

  /* header单独
    .tabs
    ├── .tab-header x n             
    │    ├── input[type=radio]  
    │    └── label.tab-title
    └── .tab-content x n        
  */
  &:has(.tab-header > input:nth-of-type(1):checked) > .tab-content:nth-child(2),
  &:has(.tab-header > input:nth-of-type(2):checked) > .tab-content:nth-child(3),
  &:has(.tab-header > input:nth-of-type(3):checked) > .tab-content:nth-child(4),
  &:has(.tab-header > input:nth-of-type(4):checked) > .tab-content:nth-child(5),
  &:has(.tab-header > input:nth-of-type(5):checked) > .tab-content:nth-child(6),
  &:has(.tab-header > input:nth-of-type(6):checked) > .tab-content:nth-child(7),
  &:has(.tab-header > input:nth-of-type(7):checked) > .tab-content:nth-child(8),
  &:has(.tab-header > input:nth-of-type(8):checked) > .tab-content:nth-child(9),
  &:has(.tab-header > input:nth-of-type(9):checked)
    > .tab-content:nth-child(10) {
    @apply block;
  }

  /*
    .tabs
    ├── .tab-header x n             
    │    ├── input[type=radio]  
    │    └── label.tab-title
    └── .tab-body
         ├── .tab-content × n
*/

  &:has(.tab-header > input:nth-of-type(1):checked)
    > .tab-body
    > .tab-content:nth-child(1),
  &:has(.tab-header > input:nth-of-type(2):checked)
    > .tab-body
    > .tab-content:nth-child(2),
  &:has(.tab-header > input:nth-of-type(3):checked)
    > .tab-body
    > .tab-content:nth-child(3),
  &:has(.tab-header > input:nth-of-type(4):checked)
    > .tab-body
    > .tab-content:nth-child(4),
  &:has(.tab-header > input:nth-of-type(5):checked)
    > .tab-body
    > .tab-content:nth-child(5),
  &:has(.tab-header > input:nth-of-type(6):checked)
    > .tab-body
    > .tab-content:nth-child(6),
  &:has(.tab-header > input:nth-of-type(7):checked)
    > .tab-body
    > .tab-content:nth-child(7),
  &:has(.tab-header > input:nth-of-type(8):checked)
    > .tab-body
    > .tab-content:nth-child(8),
  &:has(.tab-header > input:nth-of-type(9):checked)
    > .tab-body
    > .tab-content:nth-child(9) {
    @apply block;
  }
  &:has(.tab-header) {
    @apply flex-col;
  }

  /* 让所有 tab-content 占据整行 */
  & .tab-content {
    @apply basis-full;
  }
}

@utility tabs-primary {
  --tab-hover-bg: theme(colors.primary.DEFAULT);
  --tab-hover-fg: theme(colors.primary.foreground);

  &:hover {
    --tab-hover-fg: theme(colors.primary.foreground);
    --tab-hover-bg: theme(colors.primary.DEFAULT / 0.9);
  }
}

@utility tab-title {
  @apply cursor-pointer px-3 py-2 border-b-3 border-transparent;
  @apply font-medium transition-colors  -mb-px;
  @apply hover:text-foreground hover:bg-muted/50;

  @apply flex items-center;
}

@utility tab-content {
  @apply hidden w-full p-6 bg-card;
}

@utility tabs-bordered {
  & input:checked + .tab-title {
    @apply text-muted-foreground border-b-3 border-primary -mb-px;
  }
}

/* Boxed 变体 */
@utility tabs-boxed {
  @apply rounded-lg border-0;

  & .tab-title {
    @apply bg-background rounded-md border-0 mb-0;
  }

  & input:checked + .tab-title {
    @apply bg-secondary   border-b-0;
  }

  & .tab-content {
    @apply mt-2 rounded-lg border border-border;
  }
}

/* Lifted 变体 */
@utility tabs-lifted {
  @apply border-0 gap-1;

  & .tab-title {
    @apply rounded-t bg-transparent mb-0;
  }

  & input:checked + .tab-title {
    @apply bg-card -mb-1 border  border-border  border-b-transparent z-10;
  }

  & .tab-content {
    @apply border  border-border rounded-b -mt-px;
  }
}

/* 尺寸变体 */
@utility tabs-sm {
  & .tab-title {
    @apply text-sm px-2.5 py-1.5;
  }
}
@utility tabs-md {
  & .tab-title {
    @apply text-sm px-3 py-2;
  }
}

@utility tabs-lg {
  & .tab-title {
    @apply text-base px-4 py-2.5;
  }
}
